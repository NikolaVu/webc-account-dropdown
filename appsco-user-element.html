<link rel="import" href="bower_components/polymer/polymer.html">

<link rel="import" href="bower_components/iron-icons/iron-icons.html">
<link rel="import" href="bower_components/iron-icon/iron-icon.html">
<link rel="import" href="bower_components/paper-button/paper-button.html">
<link rel="import" href="bower_components/paper-item/paper-item.html">
<link rel="import" href="property-check.html">


<link rel="import" href="appsco-dropdown.html">

<!--
`appsco-user-element`
Representation of user identity

Custom property | Description | Default
----------------|-------------|----------
`--paper-button-ink-color` | Background color of the ripple | Based on the button's color
`--paper-button` | Mixin applied to the button | `{}`
`--active-account-background` | Applied to | BDefault color rgb(244, 247, 249);

@demo demo/index.html 
-->

<dom-module id="appsco-user-element">
    <template>
        <style>
            :host {
                --active-account-background: rgb(255, 255, 255);
                display: inline-block;
                color: var(--color, rgba(125, 125, 125, 1));
                position: relative;
                cursor: pointer;
            }
            :host paper-button {
                margin: 0;
                background-color: #ffffff;
                color: var(--color);
                font-size: 90%;
            }
            :host .account-holder:after {
                clear: both;
            }
            :host .user-holder {
                height: 34px;
                line-height: 34px;
            }
            :host .account-img {
                width: 32px;
                height: 32px;
                border-radius: 50%;
            }
            :host .account-info {
                margin: 10px 0 0 10px;
            }
            :host appsco-dropdown {
                --caret-color: var(--active-account-background);
                position: absolute;
                right: -10px;
                top: 30px;
                width: 350px;
                z-index: 999;
                color: var(--color, rgba(125, 125, 125, 1));
                padding: 0;
                margin: 0;
            }
            :host appsco-dropdown:focus {
                outline: none;
            }
            :host appsco-dropdown .account, :host appsco-dropdown .actions {
                padding: 10px 20px;
            }
            :host appsco-dropdown .account-img {
                width: 48px;
                height: 48px;
            }
            :host appsco-dropdown .account .info-lead {
                font-size: 120%;
                margin: 0;
                display: block;
            }
            :host appsco-dropdown .account .info-additional {
                color: #B2C2D2;
                font-size: 80%;
                margin: 0;
                padding: 0;
            }
            :host appsco-dropdown .active-account {
                display: block;
                padding: 20px;
                background-color: var(--active-account-background);
                border-top-left-radius: 4px;
                border-top-right-radius: 4px;
            }
            :host appsco-dropdown .active-account:after {
                clear: both;
            }
            :host appsco-dropdown .active-account .action-my-account {
                margin-top: 16px;
            }
            :host appsco-dropdown .active-account .image-holder,
            :host appsco-dropdown .active-account .account-info {
                display: inline-block;
            }
            :host appsco-dropdown .active-account .image-holder {
                vertical-align: top;
            }
            :host appsco-dropdown .active-account .account-img {
                width: 96px;
                height: 96px;
                border-radius: 50%;
            }
            :host appsco-dropdown .active-account .account-info {
                width: 156px;
                overflow: hidden;
            }
            :host appsco-dropdown .additional-account {
                background-color: rgba(250, 252, 253, 0.6);
            }
            :host appsco-dropdown .additional-account:hover {
                background-color: rgba(250, 252, 253, 1);
            }
            :host appsco-dropdown .additional-account .account-info {
                margin-top: 6px;
            }
            :host .btn-primary {
                color: #fff;
                background-color: #03BCFF;
            }
            :host .btn-default {
                color: inherit;
                background-color: #ffffff;
                border: 1px solid #DADCDE;
            }
        </style>

        <div class="account-holder">
            <div class="user-holder clearfix">
                <img src="[[ user.image ]]" class="account-img float-left">

                <property-check property="{{user.firstName}}">
                    <span class="account-info">[[ user.firstName ]] [[ user.lastName ]]</span>
                </property-check>

                <iron-icon icon="arrow-drop-down"></iron-icon>
            </div>

            <appsco-dropdown id="dropdown" open="{{pressed}}" tabindex="-1">
                <div class="account-holder">
                    <div class="active-account account">
                        <div class="image-holder">
                            <img src="[[ user.image ]]" class="account-img float-left">
                        </div>
                        <div class="account-info">

                            <property-check property="{{user.firstName}}">
                                <span class="info-lead">[[ user.firstName ]] [[ user.lastName ]]</span>
                            </property-check>

                            <span class="info-additional">[[ user.email ]]</span>

                            <paper-button class="btn-primary action-my-account">
                                My Account
                            </paper-button>
                        </div>
                    </div>
                </div>
                <div class="divider"></div>
                <div class="account-holder">
                    <div class="account additional-account clearfix">
                        <img src="[[ user.image ]]" class="account-img float-left">
                        <div class="account-info float-left">
                            <span class="info-lead">Boris Vujicic</span>
                            <span class="info-additional">boris.vujicic@boutsourcing.com</span>
                        </div>
                    </div>
                    <div class="divider"></div>
                    <div class="account additional-account clearfix">
                        <img src="[[ user.image ]]" class="account-img float-left">
                        <div class="account-info float-left">
                            <span class="info-lead">Nikola Vucinic</span>
                            <span class="info-additional">nikola.vucinic@boutsourcing.com</span>
                        </div>
                    </div>
                </div>
                <div class="divider"></div>
                <div class="actions">
                    <paper-button class="btn-default">Add Account</paper-button>
                    <a href="#" tabindex="-1">
                        <paper-button class="float-right">Logout</paper-button>
                    </a>
                </div>
            </appsco-dropdown>
        </div>
    </template>

    <script>
        Polymer({

            is: 'appsco-user-element',

            properties: {
                "user": {
                    type: Object,
                    notify: true,
                    value: {}
                },
                pressed: {
                    type: Boolean,
                    value: false,
                    notify: true
                }
            },
            ready: function() {
                this.setAttribute('user', JSON.stringify({
                    firstName: 'John',
                    lastName: "Doe",
                    email: "john.doe@exampleemail.com",
                    image: "http://app-layout-assets.appspot.com/assets/PharrellWilliams.jpg"
                }));
            },
            listeners: {
                'tap': '__toggle'
            },
            __toggle: function() {
                this.pressed = !this.pressed;
            }
        });
    </script>
</dom-module>
